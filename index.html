<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†œäº§å“è´®è—ä¸åŠ å·¥æŠ€æœ¯é—¯å…³æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 10px 0;
        }
        
        .container {
            width: 100%;
            max-width: 766px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* å°é¢æ ·å¼ - è‡ªé€‚åº”å¤§å° */
        .cover-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            padding: 10px;
        }
        
        .cover {
            position: relative;
            width: 100%;
            max-width: 766px;
            height: auto;
            aspect-ratio: 766/600;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            background-color: #fff;
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            background-image: url("å°é¢.png"); /* ç¬¬äºŒå¼ å›¾ç‰‡ä½œä¸ºå°é¢ */
            background-size: cover;
            background-position: center;
            opacity: 1;
        }
        
        .cover-btn {
            position: absolute;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 10;
        }
        
        /* å¸®åŠ©æŒ‰é’® - è‡ªé€‚åº”å®šä½ */
        .help-btn {
            top: 3%;
            left: 3%;
            width: 8%;
            height: 8%;
            max-width: 40px;
            max-height: 40px;
            background-color: transparent;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: transparent;
            box-shadow: none;
        }
        
        .help-btn:hover {
            background-color: rgba(255,255,255,0.2);
            color: transparent;
        }

        /* START NOWæŒ‰é’® - è‡ªé€‚åº”å®šä½ */
        .start-btn {
            position: absolute; 
            bottom: 6%; 
            left: 50%; 
            transform: translateX(-50%);
            width: 30%; 
            max-width: 226px; 
            height: 13%;
            max-height: 80px;
            background-color: transparent;
        }

        .start-btn:hover {
            background-image: url("å¼€å§‹æŒ‘æˆ˜æ–°æ ·å¼.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transform: translateX(-50%) scale(1.05);
        }

        /* æ¸¸æˆç•Œé¢æ ·å¼ - è‡ªé€‚åº”é«˜åº¦ */
        .game-container {
            width: 100%;
            max-width: 766px;
            min-height: 600px; /* æœ€å°é«˜åº¦ä¿æŒ600px */
            height: auto;
            background-color: #f9f9f9;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            display: none;
            position: relative;
            overflow: hidden;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234caf50' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            margin: 10px;
        }
        
        /* ç”Ÿäº§çº¿åœºæ™¯ - è‡ªé€‚åº”å¤§å° */
        .production-line {
            position: relative;
            margin: 15px 20px 0;
            height: 160px; /* å‡å°‘é«˜åº¦ */
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            z-index: 10;
        }
        
        /* ç”Ÿäº§çº¿ä¼ é€å¸¦ï¼ˆä¼˜åŒ–æ ·å¼ï¼‰ */
        .conveyor-belt {
            position: absolute;
            bottom: 50px; /* ä¸Šç§» */
            left: 15%;
            right: 15%;
            height: 25px; /* å‡å°‘é«˜åº¦ */
            background-color: #d0d0d0;
            z-index: 20;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15) inset, 0 3px 8px rgba(136, 136, 136, 0.3);
            background-image: linear-gradient(to right, rgba(0,0,0,0.1) 20px, transparent 20px);
            background-size: 30px 30px;
            background-repeat: repeat-x;
            background-position: center;
            border-radius: 3px;
        }
        
        /* ç”Ÿäº§çº¿èŠ‚ç‚¹ */
        .production-node {
            position: absolute;
            bottom: 50px; /* ä¸Šç§» */
            width: 80px;
            height: 50px; /* å‡å°‘é«˜åº¦ */
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 30;
            font-size: 45px; /* ç¼©å°å›¾æ ‡ */
        }
        
        .raw-materials { /* åŸæ–™åŒº */
            left: 5%;
        }
        
        .processing-plant { /* åŠ å·¥åŒº */
            right: 5%;
        }
        
        /* ç”Ÿäº§çº¿ä¸Šçš„å†œäº§å“ */
        .agri-product {
            position: absolute;
            font-size: 28px; /* ç¼©å°å›¾æ ‡ */
            z-index: 45;
            transition: transform 0.8s ease, opacity 0.8s ease, left 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
        }
        
        .raw-product {
            left: 10%;
            bottom: 70px; /* ä¸Šç§» */
        }
        
        .processing-product {
            left: 40%;
            bottom: 60px; /* ä¸Šç§» */
        }
        
        .finished-product {
            right: 10%;
            bottom: 70px; /* ä¸Šç§» */
        }
        
        /* ç”Ÿäº§çº¿èŠ‚ç‚¹å›¾æ ‡ */
        .production-icon {
            position: absolute;
            bottom: 50px; /* ä¸Šç§» */
            width: 35px;
            height: 50px;
            z-index: 35;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .production-icon-symbol {
            font-size: 28px; /* ç¼©å°å›¾æ ‡ */
            color: #8BC34A;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.5s ease;
        }
        
        .production-icon.active .production-icon-symbol {
            animation: iconShine 0.8s infinite;
            color: #4CAF50;
        }
        
        @keyframes iconShine {
            0%, 100% { color: #8BC34A; transform: scale(1); }
            50% { color: #4CAF50; transform: scale(1.2); }
        }
        
        .production-icon-1 {
            left: 35%;
        }
        
        .production-icon-2 {
            left: 65%;
        }
        
        /* ç”Ÿäº§çº¿ç‰¹æ•ˆ */
        .production-effect {
            position: absolute;
            font-size: 22px; /* ç¼©å°å›¾æ ‡ */
            z-index: 50;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .effect-1 {
            top: 30px; /* ä¸Šç§» */
            left: 35%;
        }
        
        .effect-2 {
            top: 30px; /* ä¸Šç§» */
            left: 65%;
        }
        
        /* ä¸‹æ–¹ä¿¡æ¯+ç­”é¢˜åŒºåŸŸ - åŠ¨æ€è°ƒæ•´ */
        .bottom-panel {
            display: flex;
            flex-direction: column;
            padding: 15px 20px;
            gap: 15px;
            z-index: 5;
        }
        
        /* å·¦ä¾§ï¼šé˜¶æ®µåŒºåŸŸ */
        .info-sidebar {
            width: 100%;
            background-color: white;
            border-radius: 12px;
            padding: 18px 15px; /* å‡å°‘å†…è¾¹è· */
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 18px; /* å‡å°‘é—´è· */
            position: relative;
            overflow: hidden;
        }
        
        /* é˜¶æ®µåŒºåŸŸåº•éƒ¨è£…é¥° */
        .sidebar-decoration {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50px; /* å‡å°‘é«˜åº¦ */
            display: flex;
            justify-content: space-around;
            align-items: center;
            opacity: 0.12;
            z-index: 1;
        }
        
        .decor-item {
            font-size: 24px; /* ç¼©å°å›¾æ ‡ */
            color: #4CAF50;
        }
        
        /* ç­”é¢˜å‡†ç¡®ç‡ */
        .accuracy-info {
            display: flex;
            align-items: center;
            gap: 8px;
            padding-bottom: 12px; /* å‡å°‘å†…è¾¹è· */
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            z-index: 2;
        }
        
        .accuracy-icon {
            font-size: 18px; /* ç¼©å°å›¾æ ‡ */
            color: #4CAF50;
        }
        
        .accuracy-text {
            font-size: 14px; /* ç¼©å°å­—ä½“ */
            font-weight: 500;
            color: #333;
        }
        
        /* é˜¶æ®µæ˜¾ç¤º - å†œäº§å“ä¸»é¢˜è‰² */
        .stage-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 12px; /* å‡å°‘å†…è¾¹è· */
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            z-index: 2;
        }
        
        .stage-icon {
            font-size: 22px; /* ç¼©å°å›¾æ ‡ */
            color: #8BC34A;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .stage-text {
            font-size: 15px; /* ç¼©å°å­—ä½“ */
            font-weight: 600;
            color: #333;
        }
        
        /* è®¡æ—¶å™¨ */
        .timer {
            display: flex;
            align-items: center;
            gap: 8px;
            padding-bottom: 12px; /* å‡å°‘å†…è¾¹è· */
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            z-index: 2;
        }
        
        .timer-icon {
            font-size: 20px; /* ç¼©å°å›¾æ ‡ */
            color: #4CAF50;
        }
        
        .timer-text {
            font-size: 15px; /* ç¼©å°å­—ä½“ */
            font-weight: 500;
            color: #333;
        }
        
        /* ç­”é¢˜æƒ…å†µ */
        .answer-status {
            display: flex;
            flex-direction: column;
            gap: 8px; /* å‡å°‘é—´è· */
            position: relative;
            z-index: 2;
        }
        
        .status-title {
            font-size: 14px; /* ç¼©å°å­—ä½“ */
            font-weight: 600;
            color: #333;
        }
        
        .status-progress {
            width: 100%;
            height: 7px; /* å‡å°‘é«˜åº¦ */
            background-color: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .status-desc {
            font-size: 13px; /* ç¼©å°å­—ä½“ */
            color: #666;
            text-align: right;
        }
        
        /* å³ä¾§ï¼šç­”é¢˜åŒºåŸŸ - å–æ¶ˆæ»šåŠ¨æ¡ï¼Œè‡ªé€‚åº”é«˜åº¦ */
        .answer-area {
            width: 100%;
            background-color: white;
            border-radius: 12px;
            padding: 20px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow: hidden;
        }
        
        .question-title {
            font-size: 17px; /* ç¼©å°å­—ä½“ */
            font-weight: 600;
            color: #333;
            line-height: 1.5; /* è°ƒæ•´è¡Œé«˜ */
            padding-bottom: 15px; /* å‡å°‘å†…è¾¹è· */
            border-bottom: 1px solid #f0f0f0;
            word-wrap: break-word;
            overflow-wrap: break-word;
            flex-shrink: 0; /* é˜²æ­¢é¢˜ç›®åŒºåŸŸè¢«å‹ç¼© */
        }
        
        .question-options {
            display: flex;
            flex-direction: column;
            gap: 12px; /* å‡å°‘é—´è· */
            flex: 1;
            overflow-y: visible; /* å–æ¶ˆæ»šåŠ¨ */
            padding-right: 5px; 
        }
        
        .question-option {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            line-height: 1.5;
            word-wrap: break-word;
            overflow-wrap: break-word;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
        }
        
        .option-checkbox {
            width: 20px; /* ç¼©å°å¤é€‰æ¡† */
            height: 20px;
            border-radius: 4px;
            border: 2px solid #4CAF50;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        
        .question-option.selected .option-checkbox {
            background-color: #4CAF50;
            color: white;
        }
        
        .question-option.selected .option-checkbox::after {
            content: 'âœ“';
            font-size: 12px; /* ç¼©å°å¯¹å‹¾ */
        }
        
        .question-option:hover {
            background-color: #f0f9f0;
            border-color: #4CAF50;
            transform: translateY(-2px);
        }
        
        .question-option.selected {
            background-color: #f0f9f0;
            border-color: #4CAF50;
        }
        
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 0; /* å‡å°‘å†…è¾¹è· */
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px; /* ç¼©å°å­—ä½“ */
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 3px 8px rgba(76, 175, 80, 0.2);
            margin-top: auto;
            flex-shrink: 0; /* é˜²æ­¢æŒ‰é’®è¢«å‹ç¼© */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
        }
        
        .submit-btn:disabled {
            background-color: #b8dbda;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        .submit-btn:hover:not(:disabled) {
            background-color: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(76, 175, 80, 0.3);
        }
        
        /* å¼¹çª—æ ·å¼ - ä¼˜åŒ–å®½é«˜ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2);
            justify-content: center;
            align-items: flex-start;
            padding-top: 80px;
            z-index: 200;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px; /* å‡å°å†…è¾¹è·é™ä½é«˜åº¦ */
            border-radius: 12px;
            width: 90%; /* å¢åŠ å®½åº¦å æ¯” */
            max-width: 500px; /* æé«˜æœ€å¤§å®½åº¦ */
            max-height: 80%; /* é™ä½æœ€å¤§é«˜åº¦ */
            overflow-y: auto;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            border-top: 5px solid #4CAF50;
        }
        
        .modal-title {
            font-size: 22px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .modal-text {
            font-size: 16px; /* ç¼©å°å­—ä½“èŠ‚çœç©ºé—´ */
            line-height: 1.6; /* è°ƒæ•´è¡Œé«˜å‡å°‘é«˜åº¦ */
            margin-bottom: 20px; /* å‡å°åº•éƒ¨é—´è· */
            color: #555;
        }
        
        /* ç©æ³•æŒ‡å¯¼ç‰¹æ®Šæ ·å¼ */
        .guide-section {
            margin-bottom: 25px;
        }
        
        .guide-title {
            font-size: 18px;
            color: #4CAF50;
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .guide-list {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .guide-list li {
            margin-bottom: 8px; /* å‡å°åˆ—è¡¨é¡¹é—´è· */
        }
        
        .close-btn {
            position: absolute;
            top: 18px;
            right: 18px;
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: #999;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
        }
        
        .close-btn:hover {
            color: #4CAF50;
            background-color: #f0f9f0;
        }
        
        .confirm-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            display: block;
            margin: 0 auto;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
        }
        
        .confirm-btn:hover {
            background-color: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }
        
        /* é€šå…³å¼¹çª—ç‰¹æ®Šæ ·å¼ */
        .success-icon {
            font-size: 85px;
            text-align: center;
            margin-bottom: 25px;
            animation: bounce 1s;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* ç»“æœç»Ÿè®¡å¼¹çª— - ä¼˜åŒ–å¸ƒå±€ */
        .result-container {
            text-align: center;
            padding: 10px;
        }
        
        .result-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }
        
        .result-stats-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .result-stats {
            flex: 1;
            font-size: 16px;
            padding: 12px 0;
            background-color: #f8fafc;
            border-radius: 8px;
            margin: 0 5px;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        /* éšè—éŸ³é¢‘å…ƒç´  */
        .audio-container {
            display: none;
        }

        /* é€‚é…å°å±å¹•è®¾å¤‡ï¼ˆæ‰‹æœº/å¹³æ¿ï¼‰ */
        @media (min-width: 768px) {
            .cover {
                width: 766px;
                height: 600px;
            }
            
            .bottom-panel {
                flex-direction: row;
            }
            
            .info-sidebar {
                width: 32%;
            }
            
            .answer-area {
                width: 68%;
            }
            
            .production-line {
                position: absolute;
                top: 15px;
                left: 20px;
                right: 20px;
            }
            
            .bottom-panel {
                position: absolute;
                top: 190px;
                left: 0;
                right: 0;
                bottom: 15px;
                padding: 0 20px;
            }
        }

        /* é€‚é…ä¸­å±å¹•è®¾å¤‡ï¼ˆiPadï¼‰ */
        @media (max-width: 1024px) and (min-width: 768px) {
            .container {
                max-width: 90%;
            }
            
            .game-container {
                max-width: 100%;
            }
            
            .question-title {
                font-size: 18px;
            }
            
            .question-option {
                font-size: 16px;
            }
        }

        /* é€‚é…å°å±å¹•è®¾å¤‡ï¼ˆæ‰‹æœºï¼‰ */
        @media (max-width: 767px) {
            body {
                padding: 5px 0;
            }
            
            .cover {
                border-radius: 8px;
            }
            
            .game-container {
                border-radius: 8px;
                min-height: 500px;
            }
            
            .production-line {
                height: 120px;
                margin: 10px 10px 0;
            }
            
            .conveyor-belt {
                height: 20px;
                bottom: 40px;
            }
            
            .production-node {
                bottom: 40px;
                height: 40px;
                font-size: 35px;
            }
            
            .agri-product {
                font-size: 22px;
            }
            
            .raw-product {
                bottom: 55px;
            }
            
            .processing-product {
                bottom: 50px;
            }
            
            .finished-product {
                bottom: 55px;
            }
            
            .production-icon {
                bottom: 40px;
            }
            
            .production-icon-symbol {
                font-size: 22px;
            }
            
            .production-effect {
                font-size: 18px;
            }
            
            .effect-1, .effect-2 {
                top: 20px;
            }
            
            .bottom-panel {
                padding: 10px;
                gap: 10px;
            }
            
            .info-sidebar {
                padding: 15px 10px;
                gap: 15px;
            }
            
            .answer-area {
                padding: 15px;
            }
            
            .question-title {
                font-size: 16px;
                padding-bottom: 10px;
            }
            
            .question-options {
                gap: 10px;
            }
            
            .question-option {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .submit-btn {
                padding: 12px 0;
                font-size: 16px;
            }
            
            .modal-content {
                padding: 15px;
                width: 95%;
            }
            
            .modal-title {
                font-size: 20px;
            }
            
            .modal-text {
                font-size: 15px;
            }
            
            .guide-title {
                font-size: 16px;
            }
            
            .confirm-btn {
                padding: 10px 25px;
                font-size: 15px;
            }
        }

        /* é€‚é…è¶…å°å±å¹•æ‰‹æœºï¼ˆå¦‚iPhone SEï¼‰ */
        @media (max-width: 375px) {
            .production-line {
                height: 100px;
            }
            
            .conveyor-belt {
                height: 15px;
                bottom: 35px;
            }
            
            .production-node {
                bottom: 35px;
                height: 35px;
                font-size: 30px;
            }
            
            .agri-product {
                font-size: 20px;
            }
            
            .production-icon-symbol {
                font-size: 20px;
            }
            
            .info-sidebar {
                padding: 12px 8px;
                gap: 12px;
            }
            
            .answer-area {
                padding: 12px;
            }
            
            .question-title {
                font-size: 15px;
            }
            
            .question-option {
                padding: 8px 10px;
                font-size: 13px;
            }
            
            .submit-btn {
                padding: 10px 0;
                font-size: 14px;
            }
            
            .stage-text, .timer-text, .accuracy-text {
                font-size: 14px;
            }
            
            .status-title, .status-desc {
                font-size: 13px;
            }
        }

        /* æ¨ªå±é€‚é… */
        @media (max-height: 500px) and (orientation: landscape) {
            .cover-container {
                padding: 5px;
            }
            
            .cover {
                max-height: 95vh;
            }
            
            .game-container {
                min-height: 95vh;
            }
            
            .production-line {
                height: 80px;
                margin: 5px 10px 0;
            }
            
            .conveyor-belt {
                height: 15px;
                bottom: 30px;
            }
            
            .production-node {
                bottom: 30px;
                height: 30px;
                font-size: 25px;
            }
            
            .agri-product {
                font-size: 18px;
            }
            
            .production-icon-symbol {
                font-size: 18px;
            }
            
            .bottom-panel {
                padding: 5px 10px;
                gap: 8px;
            }
            
            .info-sidebar {
                padding: 10px 8px;
                gap: 10px;
            }
            
            .answer-area {
                padding: 10px;
            }
            
            .question-title {
                font-size: 14px;
                padding-bottom: 8px;
            }
            
            .question-options {
                gap: 8px;
            }
            
            .question-option {
                padding: 8px 10px;
                font-size: 13px;
            }
            
            .submit-btn {
                padding: 8px 0;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- éŸ³é¢‘å…ƒç´ å®¹å™¨ -->
    <div class="audio-container">
        <!-- èƒŒæ™¯éŸ³ä¹ - å¾ªç¯æ’­æ”¾ -->
        <audio id="bgMusic" loop>
            <source src="background.mp3" type="audio/mpeg">
        </audio>
        <!-- å¸®åŠ©å¼¹çª—ç›¸å…³éŸ³æ•ˆ -->
        <audio id="helpSound">
            <source src="help.mp3" type="audio/mpeg">
        </audio>
        <!-- å¼€å§‹æ¸¸æˆéŸ³æ•ˆ -->
        <audio id="startSound">
            <source src="start.mp3" type="audio/mpeg">
        </audio>
        <!-- ç­”é¢˜æ­£ç¡®éŸ³æ•ˆ -->
        <audio id="correctSound">
            <source src="correct.mp3" type="audio/mpeg">
        </audio>
        <!-- ç­”é¢˜é”™è¯¯éŸ³æ•ˆ -->
        <audio id="wrongSound">
            <source src="wrong.mp3" type="audio/mpeg">
        </audio>
        <!-- è¿‡å…³éŸ³æ•ˆ -->
        <audio id="successSound">
            <source src="success.mp3" type="audio/mpeg">
        </audio>
        <!-- æ»‘åŠ¨éŸ³æ•ˆ -->
        <audio id="slideSound">
            <source src="slide.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div class="container">
        <!-- å°é¢ -->
        <div class="cover-container">
            <div class="cover">
                <div class="cover-image"></div>
                <button class="cover-btn start-btn" id="startBtn"></button>
                <button class="cover-btn help-btn" id="helpBtn"></button>
            </div>
        </div>
        
        <!-- æ¸¸æˆç•Œé¢ -->
        <div class="game-container" id="gameContainer">
            <!-- ç”Ÿäº§çº¿åœºæ™¯ -->
            <div class="production-line">
                <!-- ä¼ é€å¸¦ -->
                <div class="conveyor-belt"></div>
                
                <!-- ç”Ÿäº§çº¿èŠ‚ç‚¹ -->
                <div class="production-node raw-materials">ğŸŒ¾</div> <!-- åŸæ–™åŒº -->
                <div class="production-node processing-plant">ğŸ­</div> <!-- åŠ å·¥åŒº -->
                
                <!-- ç”Ÿäº§çº¿ä¸Šçš„å†œäº§å“ -->
                <div class="agri-product raw-product" id="rawMaterial">ğŸŒ¾</div>
                <div class="agri-product processing-product" id="processingProduct">ğŸŒ¾</div>
                <div class="agri-product finished-product" id="finishedProduct">ğŸ</div>
                
                <!-- ç”Ÿäº§çº¿èŠ‚ç‚¹å›¾æ ‡ -->
                <div class="production-icon production-icon-1">
                    <div class="production-icon-symbol">ğŸŒ¡ï¸</div>
                </div>
                <div class="production-icon production-icon-2">
                    <div class="production-icon-symbol">âš—ï¸</div>
                </div>
                
                <!-- ç”Ÿäº§çº¿ç‰¹æ•ˆ -->
                <div class="production-effect effect-1" id="effect1">âœ¨</div>
                <div class="production-effect effect-2" id="effect2">âœ¨</div>
            </div>
            
            <!-- ä¸‹æ–¹ä¿¡æ¯+ç­”é¢˜åŒºåŸŸ -->
            <div class="bottom-panel">
                <!-- å·¦ä¾§ï¼šé˜¶æ®µåŒºåŸŸ -->
                <div class="info-sidebar">
                    <div class="stage-info">
                        <span class="stage-icon" id="sidebarStageIcon">ğŸŒ±</span>
                        <span class="stage-text" id="sidebarStageText">ç¬¬1å…³ï¼šè´®è—æŠ€æœ¯åŸºç¡€</span>
                    </div>
                    
                    <div class="timer">
                        <span class="timer-icon">â±ï¸</span>
                        <span class="timer-text" id="sidebarTimer">00:00</span>
                    </div>
                    
                    <div class="accuracy-info">
                        <span class="accuracy-icon">ğŸ¯</span>
                        <span class="accuracy-text" id="accuracyText">å‡†ç¡®ç‡ï¼š0%</span>
                    </div>
                    
                    <div class="answer-status">
                        <div class="status-title">ç­”é¢˜è¿›åº¦</div>
                        <div class="status-progress">
                            <div class="progress-fill" id="statusProgress"></div>
                        </div>
                        <div class="status-desc" id="statusDesc">0/16 é¢˜ï¼ˆæ€»åˆ†100åˆ†ï¼‰</div>
                    </div>
                    
                    <!-- é˜¶æ®µåŒºåŸŸåº•éƒ¨è£…é¥° -->
                    <div class="sidebar-decoration">
                        <div class="decor-item">ğŸŒ¾</div>
                        <div class="decor-item">ğŸŒ¡ï¸</div>
                        <div class="decor-item">âš—ï¸</div>
                        <div class="decor-item">ğŸ</div>
                    </div>
                </div>
                
                <!-- å³ä¾§ï¼šç­”é¢˜åŒºåŸŸ -->
                <div class="answer-area">
                    <div class="question-title" id="questionTitle"></div>
                    <div class="question-options" id="optionsContainer"></div>
                    <button class="submit-btn" id="submitBtn" disabled>æäº¤ç­”æ¡ˆ</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç©æ³•æŒ‡å¯¼å¼¹çª— -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <button class="close-btn" id="closeHelpBtn">&times;</button>
            <h2 class="modal-title">å†œäº§å“è´®è—ä¸åŠ å·¥æŠ€æœ¯é—¯å…³æŒ‡å—</h2>
            
            <div class="guide-section">
                <h3 class="guide-title">ğŸ­ ç”Ÿäº§çº¿åœºæ™¯</h3>
                <p>ä½ å°†æ‰®æ¼”ä¸€åå†œäº§å“è´®è—åŠ å·¥æŠ€æœ¯å‘˜ï¼Œè´Ÿè´£ä»åŸæ–™å¤„ç†åˆ°æˆå“ç”Ÿäº§çš„å…¨è¿‡ç¨‹ã€‚ç”Ÿäº§çº¿åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šè´®è—æŠ€æœ¯åŸºç¡€å’ŒåŠ å·¥æŠ€æœ¯åº”ç”¨ã€‚æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸åŒçš„ç”Ÿäº§ç¯èŠ‚ï¼Œéœ€è¦ä½ æŒæ¡ç›¸åº”çš„æŠ€æœ¯çŸ¥è¯†ã€‚</p>
            </div>
            
            <div class="guide-section">
                <h3 class="guide-title">ğŸ® æ¸¸æˆç©æ³•</h3>
                <ol class="guide-list">
                    <li>ç”Ÿäº§çº¿ä»åŸæ–™å¤„ç†å¼€å§‹ï¼Œç»è¿‡ä¸¤ä¸ªå…³é”®ç”Ÿäº§ç¯èŠ‚</li>
                    <li>ç¬¬ä¸€ç¯èŠ‚ï¼šè´®è—æŠ€æœ¯åŸºç¡€ï¼ˆ10é¢˜ï¼Œæ¯é¢˜4åˆ†ï¼‰ï¼Œè€ƒå¯Ÿå†œäº§å“è´®è—çš„æ ¸å¿ƒçŸ¥è¯†</li>
                    <li>ç¬¬äºŒç¯èŠ‚ï¼šåŠ å·¥æŠ€æœ¯åº”ç”¨ï¼ˆ6é¢˜ï¼Œæ¯é¢˜10åˆ†ï¼‰ï¼Œè€ƒå¯Ÿå†œäº§å“åŠ å·¥çš„å®é™…æ“ä½œæŠ€èƒ½</li>
                    <li>é€‰æ‹©æ­£ç¡®ç­”æ¡ˆå¹¶æäº¤ï¼ŒéªŒè¯é€šè¿‡åæ‰èƒ½è¿›å…¥ä¸‹ä¸€ç”Ÿäº§ç¯èŠ‚</li>
                    <li>å›ç­”é”™è¯¯æ—¶ï¼Œç³»ç»Ÿä¼šå±•ç¤ºè¯¦ç»†è§£æï¼Œå¸®åŠ©ä½ ç†è§£çŸ¥è¯†ç‚¹</li>
                    <li>å®Œæˆæ‰€æœ‰ç”Ÿäº§ç¯èŠ‚åï¼Œå³å¯è·å¾—æœ€ç»ˆæˆå“å¹¶æŸ¥çœ‹æˆç»©</li>
                </ol>
            </div>
            
            <div class="guide-section">
                <h3 class="guide-title">ğŸ† è®¡åˆ†è§„åˆ™</h3>
                <ul class="guide-list">
                    <li>æ€»åˆ†100åˆ†ï¼Œç­”é”™ä¸å¾—åˆ†ï¼Œç­”å¯¹æŒ‰é¢˜ç›®åˆ†å€¼è®¡åˆ†</li>
                    <li>ç³»ç»Ÿä¼šè®°å½•ä½ çš„ç­”é¢˜æ—¶é—´å’Œå‡†ç¡®ç‡</li>
                    <li>å®Œæˆæ‰€æœ‰å…³å¡åå¯æŸ¥çœ‹è¯¦ç»†æˆç»©ç»Ÿè®¡</li>
                </ul>
            </div>
            
            <button class="confirm-btn" id="confirmHelpBtn">æˆ‘æ˜ç™½äº†</button>
        </div>
    </div>
    
    <!-- ç­”æ¡ˆè§£æå¼¹çª— -->
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <h2 class="modal-title">å›ç­”é”™è¯¯</h2>
            <div class="modal-text" id="errorText"></div>
            <button class="confirm-btn" id="retryBtn">é‡æ–°ç­”é¢˜</button>
        </div>
    </div>
    
    <!-- ç­”å¯¹æç¤ºå¼¹çª— - ç¬¬ä¸€é˜¶æ®µ -->
    <div class="modal" id="correctModal">
        <div class="modal-content">
            <h2 class="modal-title">å›ç­”æ­£ç¡®ï¼</h2>
            <div class="modal-text">
                <p>ğŸ‰ æ­å–œä½ æŒæ¡äº†è¯¥çŸ¥è¯†ç‚¹ï¼</p>
                <p>ç”Ÿäº§çº¿æ­£åœ¨è¿›å…¥ä¸‹ä¸€ç¯èŠ‚ğŸŒ¡ï¸</p>
            </div>
            <button class="confirm-btn" id="nextBtn">ç»§ç»­</button>
        </div>
    </div>
    
    <!-- ç­”å¯¹æç¤ºå¼¹çª— - ç¬¬äºŒé˜¶æ®µï¼ˆéæœ€åä¸€é¢˜ï¼‰ -->
    <div class="modal" id="correctModalStage2">
        <div class="modal-content">
            <h2 class="modal-title">å›ç­”æ­£ç¡®ï¼</h2>
            <div class="modal-text">
                <p>ğŸ‰ æ­å–œä½ æŒæ¡äº†è¯¥å®æ“æŠ€èƒ½ï¼</p>
                <p>ç”Ÿäº§çº¿æ­£åœ¨è¿›å…¥åŠ å·¥ç¯èŠ‚âš—ï¸</p>
            </div>
            <button class="confirm-btn" id="nextBtnStage2">ç»§ç»­</button>
        </div>
    </div>
    
    <!-- è¿›é˜¶æç¤ºå¼¹çª— - ç¾åŒ–ç‰ˆæœ¬ -->
    <div class="modal" id="advanceModal">
        <div class="modal-content">
            <h2 class="modal-title">ğŸ‰ è¿›é˜¶æŒ‘æˆ˜å¼€å¯ï¼</h2>
            <div class="modal-text">
                <p>âœ… æ­å–œå®Œæˆè´®è—æŠ€æœ¯åŸºç¡€é˜¶æ®µï¼å½“å‰å¾—åˆ†ï¼š<span id="advanceScore">0</span>åˆ†</p>
                <p>æ¥ä¸‹æ¥æ˜¯"åŠ å·¥æŠ€æœ¯åº”ç”¨"è¿›é˜¶é˜¶æ®µï¼ˆæ¯é¢˜10åˆ†ï¼‰ï¼Œè€ƒéªŒä½ å¯¹å†œäº§å“åŠ å·¥çš„å®é™…æ“ä½œèƒ½åŠ›å’Œä¸“ä¸šçŸ¥è¯†çš„ç»¼åˆè¿ç”¨ï¼</p>
                <p>å‡†å¤‡å¥½è¿æ¥æ›´å…·æŒ‘æˆ˜æ€§çš„æŠ€æœ¯éš¾é¢˜äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
            </div>
            <button class="confirm-btn" id="confirmAdvanceBtn">å¼€å§‹è¿›é˜¶æŒ‘æˆ˜</button>
        </div>
    </div>
    
    <!-- é€šå…³å¼¹çª— -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="success-icon">ğŸ‰</div>
            <h2 class="modal-title">æ­å–œé€šå…³ï¼</h2>
            <div class="modal-text">
                <p>ç”Ÿäº§çº¿æˆåŠŸå®Œæˆæ‰€æœ‰ç¯èŠ‚ï¼ä½ å·²ç†Ÿç»ƒæŒæ¡ã€Šå†œäº§å“è´®è—ä¸åŠ å·¥æŠ€æœ¯ã€‹æ ¸å¿ƒçŸ¥è¯†å’Œå®æ“æŠ€èƒ½ï¼</p>
                <p>æœ€ç»ˆå¾—åˆ†ï¼š<span id="finalScore">0</span>åˆ†</p>
            </div>
            <button class="confirm-btn" id="viewResultBtn">æŸ¥çœ‹æˆç»©</button>
        </div>
    </div>
    
    <!-- ç»“æœç»Ÿè®¡å¼¹çª— -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="result-container">
                <h2 class="result-title">æˆç»©ç»Ÿè®¡</h2>
                
                <div class="result-stats-row">
                    <div class="result-stats" id="correctCount">ç­”å¯¹: 0é¢˜</div>
                    <div class="result-stats" id="wrongCount">ç­”é”™: 0é¢˜</div>
                </div>
                
                <div class="result-stats-row">
                    <div class="result-stats" id="scoreText">å¾—åˆ†: 0/100åˆ†</div>
                    <div class="result-stats" id="accuracyResult">å‡†ç¡®ç‡: 0%</div>
                </div>
                
                <div class="result-stats-row">
                    <div class="result-stats" id="timeText">ç”¨æ—¶: 00:00</div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress" id="scoreProgress"></div>
                </div>
                <button class="confirm-btn" id="restartBtn">é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢ï¼šç¬¬åé¢˜æŸ¥çœ‹ç­”æ¡ˆå¼¹çª— -->
    <div class="modal" id="answerModal">
        <div class="modal-content">
            <button class="close-btn" id="closeAnswerBtn">&times;</button>
            <h2 class="modal-title">é¢˜ç›®è§£æ</h2>
            <div class="modal-text" id="answerExplanation"></div>
            <button class="confirm-btn" id="closeAnswerConfirmBtn">æˆ‘çŸ¥é“äº†</button>
        </div>
    </div>

    <script>
        // è·å–éŸ³é¢‘å…ƒç´ å¹¶è®¾ç½®éŸ³é‡
        const bgMusic = document.getElementById('bgMusic');
        const helpSound = document.getElementById('helpSound');
        const startSound = document.getElementById('startSound');
        const correctSound = document.getElementById('correctSound');
        const wrongSound = document.getElementById('wrongSound');
        const successSound = document.getElementById('successSound');
        const slideSound = document.getElementById('slideSound'); // æ–°å¢æ»‘åŠ¨éŸ³æ•ˆ

        // è®¾ç½®éŸ³é‡
        bgMusic.volume = 0.7;
        helpSound.volume = 0.3;
        startSound.volume = 0.3;
        correctSound.volume = 0.3;
        wrongSound.volume = 0.3;
        successSound.volume = 0.4;
        slideSound.volume = 0.3; // è®¾ç½®æ»‘åŠ¨éŸ³æ•ˆéŸ³é‡

        // è‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹
        document.addEventListener('click', function playBackgroundMusic() {
            if (bgMusic.paused) {
                bgMusic.play().catch(e => {
                    console.log('èƒŒæ™¯éŸ³ä¹æ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’:', e);
                });
            }
            document.removeEventListener('click', playBackgroundMusic);
        }, { once: true });

        // æ¸¸æˆæ•°æ® - å†œäº§å“è´®è—ä¸åŠ å·¥æŠ€æœ¯é¢˜ç›®
        const gameData = {
            stages: [
                {
                    name: "è´®è—æŠ€æœ¯åŸºç¡€",
                    icon: "ğŸŒ¡ï¸",
                    questions: [
                        {
                            question: "å½±å“å†œäº§å“è´¥åçš„å¾®ç”Ÿç‰©ä¸»è¦æœ‰ç»†èŒã€éœ‰èŒå’Œï¼ˆ   ï¼‰",
                            options: [
                                "A. é…µæ¯èŒ",
                                "B. æ”¾çº¿èŒ",
                                "C. å™¬èŒä½“",
                                "D. ç«‹å…‹æ¬¡æ°ä½“"
                            ],
                            answer: 0,
                            explanation: "å†œäº§å“è´¥åçš„ä¸»è¦å¾®ç”Ÿç‰©åŒ…æ‹¬ç»†èŒã€éœ‰èŒå’Œé…µæ¯èŒã€‚é…µæ¯èŒä¼šå¯¼è‡´å†œäº§å“å‘é…µå˜è´¨ï¼Œæ˜¯è´®è—è¿‡ç¨‹ä¸­å¸¸è§çš„æœ‰å®³å¾®ç”Ÿç‰©ä¹‹ä¸€ï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "å¸¸æ¸©è´®è—æ˜¯åˆ©ç”¨è‡ªç„¶æ¸©åº¦å˜åŒ–å’Œç®€æ˜“çš„åœºæ‰€æ¥ç»´æŒä¸€å®šçš„ï¼ˆ   ï¼‰è¿›è¡Œä¿è—çš„æ–¹æ³•",
                            options: [
                                "A. è´®è—æ¸©åº¦",
                                "B. è´®è—æ¹¿åº¦",
                                "C. è´®è—å…‰ç…§",
                                "D. è´®è—æ°”å‹"
                            ],
                            answer: 0,
                            explanation: "å¸¸æ¸©è´®è—çš„æ ¸å¿ƒæ˜¯é€šè¿‡è‡ªç„¶æ¸©åº¦è°ƒèŠ‚ç»´æŒé€‚å®œçš„è´®è—æ¸©åº¦ï¼Œåˆ©ç”¨ç®€æ˜“åœºæ‰€ï¼ˆå¦‚åœ°çª–ã€é€šé£åº“ï¼‰å®ç°å†œäº§å“çŸ­æœŸä¿é²œï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "æœºæ¢°å†·è—æ˜¯åˆ©ç”¨åˆ¶å†·æœºç»„å’Œä¿æ¸©éš”çƒ­æ€§èƒ½è‰¯å¥½çš„åº“æˆ¿ï¼Œä¿æŒæ’å®šçš„ï¼ˆ   ï¼‰æ¥è¿›è¡Œè´®è—",
                            options: [
                                "A. é«˜æ¸©",
                                "B. ä½æ¸©",
                                "C. å¸¸æ¸©",
                                "D. å˜æ¸©"
                            ],
                            answer: 1,
                            explanation: "æœºæ¢°å†·è—çš„å…³é”®æ˜¯é€šè¿‡åˆ¶å†·è®¾å¤‡åˆ›é€ æ’å®šä½æ¸©ç¯å¢ƒï¼ŒæŠ‘åˆ¶å¾®ç”Ÿç‰©ç”Ÿé•¿å’Œå†œäº§å“å‘¼å¸ä½œç”¨ï¼Œå»¶é•¿è´®è—æœŸï¼Œå› æ­¤é€‰Bã€‚"
                        },
                        {
                            question: "æ°”è°ƒè´®è—ç®€ç§°CAè´®è—ï¼ŒæŒ‡åœ¨ä½æ¸©æ¡ä»¶ä¸‹ï¼Œæ”¹å˜è´®è—ç¯å¢ƒä¸­ï¼ˆ   ï¼‰æˆåˆ†çš„è´®è—æ–¹æ³•",
                            options: [
                                "A. æ°”ä½“",
                                "B. æ¶²ä½“",
                                "C. å›ºä½“",
                                "D. èƒ¶ä½“"
                            ],
                            answer: 0,
                            explanation: "æ°”è°ƒè´®è—é€šè¿‡è°ƒæ•´ç¯å¢ƒä¸­çš„æ°”ä½“æˆåˆ†ï¼ˆå¦‚é™ä½æ°§æ°”æµ“åº¦ã€æé«˜äºŒæ°§åŒ–ç¢³æµ“åº¦ï¼‰ï¼ŒæŠ‘åˆ¶å†œäº§å“å‘¼å¸ä½œç”¨å’Œè¡°è€è¿›ç¨‹ï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "å¯¹äºå…·æœ‰å‘¼å¸é«˜å³°çš„æœå®ï¼Œåœ¨é«˜å³°å‰è¿›è¡Œè¾ç…§å¤„ç†ï¼Œèƒ½æŠ‘åˆ¶é«˜å³°å‡ºç°çš„åŸå› æ˜¯å¹²æ‰°äº†ï¼ˆ   ï¼‰çš„åˆæˆ",
                            options: [
                                "A. è„±è½é…¸",
                                "B. ç”Ÿé•¿ç´ ",
                                "C. ç»†èƒåˆ†è£‚ç´ ",
                                "D. ä¹™çƒ¯"
                            ],
                            answer: 3,
                            explanation: "ä¹™çƒ¯æ˜¯ä¿ƒè¿›æœå®æˆç†Ÿçš„å…³é”®æ¿€ç´ ï¼Œå‘¼å¸é«˜å³°å‰ä¹™çƒ¯åˆæˆå¢åŠ ã€‚è¾ç…§å¤„ç†å¯å¹²æ‰°ä¹™çƒ¯åˆæˆï¼Œä»è€ŒæŠ‘åˆ¶å‘¼å¸é«˜å³°ï¼Œå»¶é•¿è´®è—æœŸï¼Œå› æ­¤é€‰Dã€‚"
                        },
                        {
                            question: "æ™šç†Ÿã€çš®åšã€æœè‚‰è‡´å¯†ã€æœé¢å¯Œé›†èœ¡è´¨ç­‰æ˜¯ï¼ˆ   ï¼‰å“ç§åº”å…·æœ‰çš„æ€§çŠ¶",
                            options: [
                                "A. æ—©ç†Ÿ",
                                "B. è€è´®è¿",
                                "C. é²œé£Ÿ",
                                "D. åŠ å·¥"
                            ],
                            answer: 1,
                            explanation: "è€è´®è¿å“ç§éœ€è¦å…·å¤‡çš®åšã€æœè‚‰è‡´å¯†ã€èœ¡è´¨å±‚åšç­‰æ€§çŠ¶ï¼Œä»¥å‡å°‘è¿è¾“è¿‡ç¨‹ä¸­çš„æœºæ¢°æŸä¼¤å’Œæ°´åˆ†æµå¤±ï¼Œå› æ­¤é€‰Bã€‚"
                        },
                        {
                            question: "ç½åˆ¶å“åœ¨å¸¸æ¸©ä¸‹å¯ä¿å­˜ï¼ˆ   ï¼‰å¹´ä¸å",
                            options: [
                                "A. 1-2",
                                "B. 3-4",
                                "C. 5-6",
                                "D. 7-8"
                            ],
                            answer: 0,
                            explanation: "ç½åˆ¶å“é€šè¿‡é«˜æ¸©ç­èŒå’Œå¯†å°åŒ…è£…ï¼Œå¸¸æ¸©ä¸‹ä¿è´¨æœŸé€šå¸¸ä¸º1-2å¹´ï¼Œè¶…è¿‡åå¯èƒ½å‡ºç°å¯†å°å¤±æ•ˆã€å¾®ç”Ÿç‰©æ±¡æŸ“ç­‰é—®é¢˜ï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "å¹²åˆ¶å“çš„å«æ°´é‡åº”æ§åˆ¶åœ¨ï¼ˆ   ï¼‰%èŒƒå›´å†…",
                            options: [
                                "A. 10ï½20",
                                "B. 20ï½30",
                                "C. 30ï½40",
                                "D. 40ï½50"
                            ],
                            answer: 0,
                            explanation: "å¹²åˆ¶å“çš„å«æ°´é‡æ§åˆ¶åœ¨10-20%æ—¶ï¼Œå¯æœ‰æ•ˆæŠ‘åˆ¶å¾®ç”Ÿç‰©ç”Ÿé•¿ç¹æ®–ï¼ŒåŒæ—¶ä¿æŒäº§å“å“è´¨ï¼Œå»¶é•¿ä¿è´¨æœŸï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "æ•£å †ä¸Šå±‚éº¦ç²’å¸æ°´è†¨èƒ€ï¼Œé€ æˆï¼ˆ   ï¼‰æ˜¯å°éº¦ä¿è—ä¸­æœ€å¸¸è§çš„ç°è±¡",
                            options: [
                                "A. å‘èŠ½",
                                "B. éœ‰å˜",
                                "C. ç»“é¡¶",
                                "D. è™«è›€"
                            ],
                            answer: 2,
                            explanation: "å°éº¦æ•£å †è´®è—æ—¶ï¼Œä¸Šå±‚éº¦ç²’æ˜“å¸æ”¶ç©ºæ°”ä¸­çš„æ°´åˆ†è€Œè†¨èƒ€ï¼Œå¯¼è‡´é¢—ç²’ç»“å—å½¢æˆç»“é¡¶ç°è±¡ï¼Œå½±å“é€šé£å’Œè´®è—å®‰å…¨ï¼Œå› æ­¤é€‰Cã€‚"
                        },
                        {
                            question: "åœ¨é‡‘å±å‚¬åŒ–å‰‚ä½œç”¨ä¸‹ï¼Œæ°¢åŠ åˆ°ç”˜æ²¹ä¸‰é…¸é…¯çš„ä¸é¥±å’Œè„‚è‚ªåŒé”®ä¸Šçš„ååº”ç§°ä¸ºæ²¹è„‚çš„ï¼ˆ   ï¼‰",
                            options: [
                                "A. æ°§åŒ–",
                                "B. æ°¢åŒ–",
                                "C. æ°´è§£",
                                "D. åˆ†è§£"
                            ],
                            answer: 1,
                            explanation: "æ²¹è„‚æ°¢åŒ–æ˜¯æŒ‡åœ¨å‚¬åŒ–å‰‚ä½œç”¨ä¸‹ï¼Œä¸é¥±å’Œè„‚è‚ªé…¸çš„åŒé”®ä¸æ°¢ç»“åˆç”Ÿæˆé¥±å’Œè„‚è‚ªé…¸çš„ååº”ï¼Œå¯æé«˜æ²¹è„‚ç¨³å®šæ€§å’Œç†”ç‚¹ï¼Œå› æ­¤é€‰Bã€‚"
                        }
                    ],
                    checkpoint: 1,
                    type: "single",
                    scorePerQ: 4 // ç¬¬ä¸€é˜¶æ®µæ¯é¢˜4åˆ†
                },
                {
                    name: "åŠ å·¥æŠ€æœ¯åº”ç”¨",
                    icon: "âš—ï¸",
                    questions: [
                        {
                            question: "äº•çª–ï¼ˆ   ï¼‰å¸¸è§ï¼Œå¯è´®è—å¤§ç™½èœã€èåœã€é©¬é“ƒè–¯ã€æŸ‘æ¡”ç­‰å†œäº§å“",
                            options: [
                                "A. å—æ–¹",
                                "B. åŒ—æ–¹"
                            ],
                            answer: 1,
                            explanation: "äº•çª–æ˜¯åŒ—æ–¹åœ°åŒºå¸¸è§çš„ç®€æ˜“è´®è—è®¾æ–½ï¼Œåˆ©ç”¨åœ°ä¸‹æ¸©åº¦ç¨³å®šçš„ç‰¹ç‚¹ï¼Œé€‚åˆè´®è—è€ä½æ¸©çš„æ ¹èŒç±»å’Œæœå®ç±»å†œäº§å“ï¼Œå› æ­¤é€‰Bã€‚"
                        },
                        {
                            question: "æ°”è°ƒåº“è¿è¡Œä¸­è¦å®šæœŸå¯¹æ°”ä½“æˆåˆ†è¿›è¡Œæ£€æµ‹ï¼Œæ°”ä½“æµ“åº¦çš„æ³¢åŠ¨æœ€å¥½æ§åˆ¶åœ¨ï¼ˆ   ï¼‰",
                            options: [
                                "A. 0.1%ä»¥å†…",
                                "B. 0.2%ä»¥å†…",
                                "C. 0.3%ä»¥å†…",
                                "D. 0.4%ä»¥å†…"
                            ],
                            answer: 2,
                            explanation: "æ°”è°ƒè´®è—å¯¹æ°”ä½“æµ“åº¦ç¨³å®šæ€§è¦æ±‚è¾ƒé«˜ï¼Œæ³¢åŠ¨æ§åˆ¶åœ¨0.3%ä»¥å†…å¯ä¿è¯è´®è—æ•ˆæœï¼Œé¿å…å†œäº§å“å› æ°”ä½“æˆåˆ†çªå˜è€Œå—æŸï¼Œå› æ­¤é€‰Cã€‚"
                        },
                        {
                            question: "æœå®çš„ç³–åº¦ç”¨ï¼ˆ   ï¼‰è¿›è¡Œæµ‹é‡",
                            options: [
                                "A. æ‰‹æŒç³–åº¦è®¡",
                                "B. åˆ†å…‰å…‰åº¦æ³•",
                                "C. æ‰‹æŒç¡¬åº¦è®¡"
                            ],
                            answer: 0,
                            explanation: "æ‰‹æŒç³–åº¦è®¡æ˜¯å†œäº§å“åŠ å·¥ä¸­å¸¸ç”¨çš„å¿«é€Ÿæ£€æµ‹å·¥å…·ï¼Œé€šè¿‡æŠ˜å°„åŸç†æµ‹é‡æœå®å¯æº¶æ€§å›ºå½¢ç‰©å«é‡ï¼ˆç³–åº¦ï¼‰ï¼Œæ“ä½œç®€ä¾¿ï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "ä»¥ä¸‹å“ªç§æ°´æœæ˜¯å¯¹ä¹™çƒ¯æ•æ„Ÿæ€§è¾ƒå¼ºçš„æœå®ï¼Œè´®è—ä¸­éœ€é™ä½ç¯å¢ƒä¹™çƒ¯æµ“åº¦",
                            options: [
                                "A. æŸ æª¬",
                                "B. è‹¹æœ",
                                "C. é¾™çœ¼",
                                "D. è‘¡è„"
                            ],
                            answer: 1,
                            explanation: "è‹¹æœæ˜¯å…¸å‹çš„å‘¼å¸é«˜å³°å‹æœå®ï¼Œè‡ªèº«ä¼šå¤§é‡äº§ç”Ÿä¹™çƒ¯ï¼ŒåŒæ—¶å¯¹ä¹™çƒ¯æ•æ„Ÿæ€§å¼ºï¼Œé«˜æµ“åº¦ä¹™çƒ¯ä¼šåŠ é€Ÿå…¶æˆç†Ÿè¡°è€ï¼Œå› æ­¤é€‰Bã€‚"
                        },
                        {
                            question: "ç¨»è°·ç±½ç²’çš„é•¿åº¦ã€å®½åº¦å’Œåšåº¦ç§°ä¸ºç¨»è°·çš„ï¼ˆ   ï¼‰",
                            options: [
                                "A. ç²’åº¦",
                                "B. å½¢çŠ¶æŒ‡æ•°",
                                "C. ç²’å‹æŒ‡æ•°",
                                "D. åƒç²’æ•°"
                            ],
                            answer: 0,
                            explanation: "ç²’åº¦æ˜¯æŒ‡è°·ç‰©é¢—ç²’çš„ä¸‰ç»´å°ºå¯¸ï¼ˆé•¿ã€å®½ã€åšï¼‰ï¼Œæ˜¯ç¨»è°·åˆ†çº§ã€åŠ å·¥å·¥è‰ºé€‰æ‹©çš„é‡è¦æŒ‡æ ‡ï¼Œå› æ­¤é€‰Aã€‚"
                        },
                        {
                            question: "å½±å“æŒ‚é¢å’Œé¢æ•ˆæœçš„ä¸»è¦å› ç´ æœ‰ï¼ˆ   ï¼‰",
                            options: [
                                "A. æ°´åˆ†",
                                "B. æ—¶é—´",
                                "C. æ¸©åº¦",
                                "D. ä»¥ä¸Šéƒ½æ˜¯"
                            ],
                            answer: 3,
                            explanation: "æŒ‚é¢å’Œé¢æ—¶ï¼Œæ°´åˆ†æ§åˆ¶é¢å›¢è½¯ç¡¬ã€æ—¶é—´å½±å“é¢ç­‹å½¢æˆã€æ¸©åº¦å½±å“é…¶æ´»æ€§å’Œé¢å›¢ç¨³å®šæ€§ï¼Œä¸‰è€…å‡æ˜¯å…³é”®å½±å“å› ç´ ï¼Œå› æ­¤é€‰Dã€‚"
                        }
                    ],
                    checkpoint: 2,
                    type: "single",
                    scorePerQ: 10 // ç¬¬äºŒé˜¶æ®µæ¯é¢˜10åˆ†
                }
            ]
        };

        // ç”Ÿäº§çº¿èŠ‚ç‚¹ä½ç½® - æ”¹ä¸ºç™¾åˆ†æ¯”å®šä½
        const productionNodes = {
            start: 10,
            1: 35,
            2: 65,
            end: 90
        };

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            currentStage: 0,
            currentQuestion: 0,
            score: 0,
            correctAnswers: 0,
            totalAttempts: 0,
            wrongAttempts: 0,
            startTime: null,
            timerInterval: null,
            elapsedTime: 0,
            selectedOptions: [],
            completedQuestions: [],
            totalQuestions: 16 // 10+6é¢˜
        };

        // DOM å…ƒç´ 
        const startBtn = document.getElementById('startBtn');
        const helpBtn = document.getElementById('helpBtn');
        const gameContainer = document.getElementById('gameContainer');
        const submitBtn = document.getElementById('submitBtn');
        const questionTitle = document.getElementById('questionTitle');
        const optionsContainer = document.getElementById('optionsContainer');
        
        // ç”Ÿäº§çº¿å…ƒç´ 
        const rawMaterial = document.getElementById('rawMaterial');
        const processingProduct = document.getElementById('processingProduct');
        const finishedProduct = document.getElementById('finishedProduct');
        const effect1 = document.getElementById('effect1');
        const effect2 = document.getElementById('effect2');
        
        // ä¾§è¾¹æ å…ƒç´ 
        const sidebarStageIcon = document.getElementById('sidebarStageIcon');
        const sidebarStageText = document.getElementById('sidebarStageText');
        const sidebarTimer = document.getElementById('sidebarTimer');
        const statusProgress = document.getElementById('statusProgress');
        const statusDesc = document.getElementById('statusDesc');
        const accuracyText = document.getElementById('accuracyText');
        const accuracyResult = document.getElementById('accuracyResult');
        const correctCount = document.getElementById('correctCount');
        const wrongCount = document.getElementById('wrongCount');
        const finalScore = document.getElementById('finalScore');
        
        // å…¶ä»–å…ƒç´ 
        const helpModal = document.getElementById('helpModal');
        const closeHelpBtn = document.getElementById('closeHelpBtn');
        const confirmHelpBtn = document.getElementById('confirmHelpBtn');
        const errorModal = document.getElementById('errorModal');
        const errorText = document.getElementById('errorText');
        const retryBtn = document.getElementById('retryBtn');
        const correctModal = document.getElementById('correctModal');
        const nextBtn = document.getElementById('nextBtn');
        const correctModalStage2 = document.getElementById('correctModalStage2');
        const nextBtnStage2 = document.getElementById('nextBtnStage2');
        const advanceModal = document.getElementById('advanceModal');
        const confirmAdvanceBtn = document.getElementById('confirmAdvanceBtn');
        const successModal = document.getElementById('successModal');
        const viewResultBtn = document.getElementById('viewResultBtn');
        const resultModal = document.getElementById('resultModal');
        const scoreText = document.getElementById('scoreText');
        const timeText = document.getElementById('timeText');
        const scoreProgress = document.getElementById('scoreProgress');
        const restartBtn = document.getElementById('restartBtn');

        // æ–°å¢ï¼šæŸ¥çœ‹ç­”æ¡ˆå¼¹çª—å…ƒç´ 
        const answerModal = document.getElementById('answerModal');
        const closeAnswerBtn = document.getElementById('closeAnswerBtn');
        const closeAnswerConfirmBtn = document.getElementById('closeAnswerConfirmBtn');
        const answerExplanation = document.getElementById('answerExplanation');

        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', () => {
            startSound.play();
            document.querySelector('.cover-container').style.display = 'none';
            gameContainer.style.display = 'block';
            initGame();
        });
        
        // æ·»åŠ startæŒ‰é’®é¼ æ ‡æ‚¬åœéŸ³æ•ˆ
        startBtn.addEventListener('mouseenter', () => {
            slideSound.currentTime = 0; // é‡ç½®éŸ³æ•ˆ
            slideSound.play().catch(e => {
                console.log('æ»‘åŠ¨éŸ³æ•ˆæ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’:', e);
            });
        });

        // æ–°å¢ï¼šå¸®åŠ©æŒ‰é’®é¼ æ ‡æ‚¬åœéŸ³æ•ˆ
        helpBtn.addEventListener('mouseenter', () => {
            slideSound.currentTime = 0; // é‡ç½®éŸ³æ•ˆ
            slideSound.play().catch(e => {
                console.log('æ»‘åŠ¨éŸ³æ•ˆæ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’:', e);
            });
        });
        
        helpBtn.addEventListener('click', () => {
            helpSound.play();
            helpModal.style.display = 'flex';
        });
        
        closeHelpBtn.addEventListener('click', () => {
            helpSound.play();
            helpModal.style.display = 'none';
        });
        
        confirmHelpBtn.addEventListener('click', () => {
            helpSound.play();
            helpModal.style.display = 'none';
        });

        submitBtn.addEventListener('click', submitAnswer);
        
        retryBtn.addEventListener('click', () => {
            errorModal.style.display = 'none';
            // ç¬¬åé¢˜é”™è¯¯æ—¶ï¼Œå…³é—­é”™è¯¯å¼¹çª—åæ˜¾ç¤ºæŸ¥çœ‹ç­”æ¡ˆ
            const isTenthQuestion = gameState.currentStage === 0 && gameState.currentQuestion === 9;
            if (isTenthQuestion) {
                const question = gameData.stages[gameState.currentStage].questions[gameState.currentQuestion];
                answerExplanation.textContent = question.explanation;
                answerModal.style.display = 'flex';
            } else {
                // å…¶ä»–é¢˜é”™è¯¯ï¼Œç›´æ¥é‡æ–°åŠ è½½
                loadQuestion();
            }
        });
        
        // ç¬¬ä¸€é˜¶æ®µæ­£ç¡®å¼¹çª—ï¼ˆå«ç¬¬åé¢˜ï¼‰- é€»è¾‘ç»Ÿä¸€
        nextBtn.addEventListener('click', () => {
            correctModal.style.display = 'none';
            const currentStage = gameData.stages[gameState.currentStage];
            
            processingProduct.style.opacity = 0;
            
            updateAnswerStatus();
            updateAccuracy();
            
            // æ¨è¿›é¢˜ç›®ç´¢å¼•
            gameState.currentQuestion++;
            
            // åˆ¤æ–­æ˜¯å¦ä¸ºç¬¬ä¸€é˜¶æ®µæœ€åä¸€é¢˜ï¼ˆç¬¬åé¢˜ï¼‰
            if (gameState.currentQuestion >= currentStage.questions.length) {
                // è¿›å…¥è¿›é˜¶é˜¶æ®µ
                document.getElementById('advanceScore').textContent = gameState.score;
                advanceModal.style.display = 'flex';
            } else {
                // åŠ è½½ä¸‹ä¸€é¢˜
                loadQuestion();
                processingProduct.style.opacity = 1;
                processingProduct.style.left = `${productionNodes[1]}%`;
            }
        });
        
        // ç¬¬äºŒé˜¶æ®µæ­£ç¡®å¼¹çª—ï¼ˆå«æœ€åä¸€é¢˜ï¼‰- é€»è¾‘ç»Ÿä¸€
        nextBtnStage2.addEventListener('click', () => {
            correctModalStage2.style.display = 'none';
            const currentStage = gameData.stages[gameState.currentStage];
            
            processingProduct.style.opacity = 0;
            
            updateAnswerStatus();
            updateAccuracy();
            
            // æ¨è¿›é¢˜ç›®ç´¢å¼•
            gameState.currentQuestion++;
            
            // åˆ¤æ–­æ˜¯å¦ä¸ºç¬¬äºŒé˜¶æ®µæœ€åä¸€é¢˜
            if (gameState.currentQuestion >= currentStage.questions.length) {
                // å…¨éƒ¨é¢˜ç›®å®Œæˆï¼Œæ˜¾ç¤ºé€šå…³å¼¹çª—
                successSound.play();
                finalScore.textContent = gameState.score;
                successModal.style.display = 'flex';
            } else {
                // åŠ è½½ä¸‹ä¸€é¢˜
                setTimeout(() => {
                    loadQuestion();
                    processingProduct.style.opacity = 1;
                    processingProduct.style.left = `${productionNodes[2]}%`;
                }, 300);
            }
        });
        
        confirmAdvanceBtn.addEventListener('click', () => {
            startSound.play();
            advanceModal.style.display = 'none';
            
            // ä»è´®è—åŒºç§»åŠ¨åˆ°åŠ å·¥åŒºçš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆæé€Ÿï¼šåŸ300â†’100ï¼Œ1200â†’500ï¼Œ800â†’300ï¼‰
            processingProduct.style.opacity = 1;
            processingProduct.style.left = `${productionNodes[1]}%`;
            processingProduct.style.transform = "scale(1)";
            
            setTimeout(() => {
                processingProduct.style.left = `${productionNodes[2]}%`;
                setTimeout(() => {
                    processingProduct.style.opacity = 0;
                    setTimeout(() => {
                        nextStage();
                    }, 300); // åŸ800ms
                }, 500); // åŸ1200ms
            }, 100); // åŸ300ms
        });
        
        viewResultBtn.addEventListener('click', () => {
            successModal.style.display = 'none';
            showResults();
        });
        
        restartBtn.addEventListener('click', () => {
            resultModal.style.display = 'none';
            resetGame();
            setTimeout(() => {
                document.querySelector('.cover-container').style.display = 'flex';
                gameContainer.style.display = 'none';
            }, 300);
        });

        // æ–°å¢ï¼šæŸ¥çœ‹ç­”æ¡ˆå¼¹çª—å…³é—­äº‹ä»¶
        closeAnswerBtn.addEventListener('click', () => {
            answerModal.style.display = 'none';
            // å…³é—­è§£æåé‡æ–°åŠ è½½ç¬¬åé¢˜
            loadQuestion();
        });

        closeAnswerConfirmBtn.addEventListener('click', () => {
            answerModal.style.display = 'none';
            // å…³é—­è§£æåé‡æ–°åŠ è½½ç¬¬åé¢˜
            loadQuestion();
        });

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            gameState = {
                currentStage: 0,
                currentQuestion: 0,
                score: 0,
                correctAnswers: 0,
                totalAttempts: 0,
                wrongAttempts: 0,
                startTime: new Date(),
                timerInterval: setInterval(updateTimer, 1000),
                elapsedTime: 0,
                selectedOptions: [],
                completedQuestions: [],
                totalQuestions: 16
            };
            
            resetProducts();
            updateSidebarInfo();
            updateAnswerStatus();
            updateAccuracy();
            activateProductionIcon(1);
            
            // åŸæ–™æŠ•å…¥åŠ¨ç”»
            setTimeout(() => {
                rawMaterial.style.opacity = 1;
                setTimeout(() => {
                    rawMaterial.style.transform = `translate(${60}px, -20px)`;
                    rawMaterial.style.opacity = 0;
                    setTimeout(() => {
                        processingProduct.style.opacity = 1;
                        processingProduct.style.left = `${productionNodes[1]}%`;
                        setTimeout(() => {
                            loadQuestion();
                        }, 800);
                    }, 600);
                }, 500);
            }, 300);
        }

        // åŠ è½½é¢˜ç›® - ä¿®æ”¹é¢˜å·æ ¼å¼ä¸º"1. 2. 3. ..."
        function loadQuestion() {
            const stage = gameData.stages[gameState.currentStage];
            const question = stage.questions[gameState.currentQuestion];
            
            // ä¿®æ”¹é¢˜å·æ ¼å¼ä¸ºæ•°å­—åŠ å¥å·
            questionTitle.textContent = `${gameState.currentQuestion + 1}. ${question.question}`;
            optionsContainer.innerHTML = '';
            gameState.selectedOptions = [];
            submitBtn.disabled = true;
            
            question.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'question-option';
                optionEl.innerHTML = `
                    <div class="option-checkbox"></div>
                    <span>${option}</span>
                `;
                optionEl.dataset.index = index;
                
                optionEl.addEventListener('click', () => {
                    if (stage.type === 'single') {
                        document.querySelectorAll('.question-option').forEach(el => el.classList.remove('selected'));
                        optionEl.classList.add('selected');
                        gameState.selectedOptions = [index];
                    } else {
                        optionEl.classList.toggle('selected');
                        gameState.selectedOptions = Array.from(document.querySelectorAll('.question-option.selected'))
                            .map(el => parseInt(el.dataset.index));
                    }
                    submitBtn.disabled = gameState.selectedOptions.length === 0;
                });
                
                optionsContainer.appendChild(optionEl);
            });
            
            // åŠ¨æ€è°ƒæ•´æ¸¸æˆç•Œé¢é«˜åº¦
            adjustGameContainerHeight();
        }

        // åŠ¨æ€è°ƒæ•´æ¸¸æˆç•Œé¢é«˜åº¦
        function adjustGameContainerHeight() {
            // ç§»åŠ¨ç«¯ä¸éœ€è¦è°ƒæ•´é«˜åº¦ï¼Œå› ä¸ºä½¿ç”¨äº†å¼¹æ€§å¸ƒå±€
            if (window.innerWidth < 768) return;
            
            const gameContainer = document.getElementById('gameContainer');
            const bottomPanel = document.querySelector('.bottom-panel');
            
            // è®¡ç®—åº•éƒ¨é¢æ¿çš„å®é™…é«˜åº¦
            const bottomPanelHeight = bottomPanel.offsetHeight;
            
            // è®¡ç®—ç”Ÿäº§çº¿é«˜åº¦å’Œé—´è·
            const productionLineHeight = 160; // ç”Ÿäº§çº¿é«˜åº¦
            const topMargin = 15; // ç”Ÿäº§çº¿é¡¶éƒ¨é—´è·
            const bottomMargin = 15; // åº•éƒ¨é¢æ¿åº•éƒ¨é—´è·
            
            // è®¡ç®—æ‰€éœ€æ€»é«˜åº¦
            const requiredHeight = topMargin + productionLineHeight + bottomPanelHeight + bottomMargin;
            
            // è®¾ç½®æ¸¸æˆå®¹å™¨é«˜åº¦ï¼Œè‡³å°‘ä¸º600px
            gameContainer.style.height = Math.max(600, requiredHeight) + 'px';
        }

        // æäº¤ç­”æ¡ˆ - ç»Ÿä¸€æ‰€æœ‰é¢˜ç›®é€»è¾‘ï¼šç­”å¯¹æ˜¾å¯¹åº”æ­£ç¡®å¼¹çª—ï¼Œç­”é”™æ˜¾é”™è¯¯å¼¹çª—
        function submitAnswer() {
            const stage = gameData.stages[gameState.currentStage];
            const question = stage.questions[gameState.currentQuestion];
            const questionId = `${gameState.currentStage}-${gameState.currentQuestion}`;
            let isCorrect = false;
            const isLastQuestionOfStage = gameState.currentQuestion === stage.questions.length - 1; // å½“å‰é˜¶æ®µæœ€åä¸€é¢˜
            
            // åˆ¤æ–­ç­”æ¡ˆæ­£ç¡®æ€§
            if (stage.type === 'single') {
                isCorrect = gameState.selectedOptions[0] === question.answer;
            } else {
                isCorrect = JSON.stringify([...gameState.selectedOptions].sort()) === JSON.stringify([...question.answer].sort());
            }
            
            gameState.totalAttempts++;
            
            // å¾—åˆ†è§„åˆ™ï¼šç­”é”™ä¸å¾—åˆ†ï¼Œç­”å¯¹æŒ‰é˜¶æ®µåˆ†å€¼åŠ åˆ†
            if (isCorrect && !gameState.completedQuestions.includes(questionId)) {
                gameState.correctAnswers++;
                gameState.score += stage.scorePerQ; // æŒ‰é˜¶æ®µåˆ†å€¼åŠ åˆ†
            }
            
            if (!isCorrect) {
                gameState.wrongAttempts++;
            }
            
            if (!gameState.completedQuestions.includes(questionId)) {
                gameState.completedQuestions.push(questionId);
            }
            
            // æ­£ç¡®ç­”æ¡ˆå¤„ç† - æŒ‰é˜¶æ®µæ˜¾ç¤ºå¯¹åº”æ­£ç¡®å¼¹çª—ï¼ˆç»Ÿä¸€é€»è¾‘ï¼‰
            if (isCorrect) {
                correctSound.currentTime = 0;
                correctSound.play();
                
                // ç”Ÿäº§çº¿ç‰¹æ•ˆ
                if (gameState.currentStage === 0) {
                    showProductionEffect(1);
                    setTimeout(() => {
                        processingProduct.style.left = `${productionNodes[1]}%`;
                        processingProduct.style.opacity = 0;
                    }, 500);
                    correctModal.style.display = 'flex'; // ç¬¬ä¸€é˜¶æ®µç»Ÿä¸€ç”¨correctModal
                } else {
                    showProductionEffect(2);
                    setTimeout(() => {
                        processingProduct.style.left = `${productionNodes[2]}%`;
                        processingProduct.style.opacity = 0;
                    }, 500);
                    correctModalStage2.style.display = 'flex'; // ç¬¬äºŒé˜¶æ®µç»Ÿä¸€ç”¨correctModalStage2
                }
                
                updateAnswerStatus();
                updateAccuracy();
            } else {
                // é”™è¯¯ç­”æ¡ˆå¤„ç† - ç»Ÿä¸€æ˜¾ç¤ºé”™è¯¯å¼¹çª—
                wrongSound.currentTime = 0;
                wrongSound.play();
                errorText.textContent = question.explanation;
                errorModal.style.display = 'flex';
            }
        }

        // æ˜¾ç¤ºç”Ÿäº§çº¿ç‰¹æ•ˆ
        function showProductionEffect(effectNumber) {
            const effect = effectNumber === 1 ? effect1 : effect2;
            effect.style.opacity = 1;
            effect.style.transform = "scale(2)";
            setTimeout(() => {
                effect.style.opacity = 0;
                effect.style.transform = "scale(1)";
            }, 800);
        }

        // ä¸‹ä¸€é˜¶æ®µ
        function nextStage() {
            gameState.currentStage++;
            gameState.currentQuestion = 0;
            updateSidebarInfo();
            activateProductionIcon(gameData.stages[gameState.currentStage].checkpoint);
            
            // æ›´æ¢äº§å“å›¾æ ‡
            processingProduct.innerHTML = "ğŸ";
            // æ˜¾ç¤ºå†œäº§å“å¹¶å®šä½åˆ°åŠ å·¥åŒº
            processingProduct.style.opacity = 1;
            processingProduct.style.left = `${productionNodes[2]}%`;
            loadQuestion();
        }

        // æ›´æ–°ä¾§è¾¹æ ä¿¡æ¯
        function updateSidebarInfo() {
            const stage = gameData.stages[gameState.currentStage];
            sidebarStageIcon.textContent = stage.icon;
            sidebarStageText.textContent = `ç¬¬${gameState.currentStage + 1}å…³ï¼š${stage.name}`;
        }

        // æ›´æ–°è®¡æ—¶å™¨
        function updateTimer() {
            gameState.elapsedTime = Math.floor((new Date() - gameState.startTime) / 1000);
            const minutes = Math.floor(gameState.elapsedTime / 60).toString().padStart(2, '0');
            const seconds = (gameState.elapsedTime % 60).toString().padStart(2, '0');
            sidebarTimer.textContent = `${minutes}:${seconds}`;
        }

        // æ›´æ–°ç­”é¢˜è¿›åº¦
        function updateAnswerStatus() {
            const answeredCount = gameState.completedQuestions.length;
            const progressPercent = (answeredCount / gameState.totalQuestions) * 100;
            statusProgress.style.width = `${progressPercent}%`;
            statusDesc.textContent = `${answeredCount}/16 é¢˜ï¼ˆæ€»åˆ†100åˆ†ï¼‰`;
        }

        // æ›´æ–°å‡†ç¡®ç‡
        function updateAccuracy() {
            if (gameState.totalAttempts === 0) {
                accuracyText.textContent = "å‡†ç¡®ç‡ï¼š0%";
                return;
            }
            
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100);
            accuracyText.textContent = `å‡†ç¡®ç‡ï¼š${accuracy}%`;
        }

        // æ¿€æ´»ç”Ÿäº§çº¿èŠ‚ç‚¹å›¾æ ‡
        function activateProductionIcon(iconNumber) {
            document.querySelectorAll('.production-icon').forEach(icon => icon.classList.remove('active'));
            document.querySelector(`.production-icon-${iconNumber}`).classList.add('active');
        }

        // ç”Ÿäº§æˆå“åŠ¨ç”»ï¼ˆæœ€åä¸€é¢˜ä¸“ç”¨ï¼‰
        function produceFinishedProduct() {
            processingProduct.style.opacity = 1;
            processingProduct.style.left = `${productionNodes.end + 5}%`;
            setTimeout(() => {
                processingProduct.style.transform = `translate(${-70}px, -20px)`;
                processingProduct.style.opacity = 0;
                setTimeout(() => {
                    finishedProduct.style.opacity = 1;
                    finishedProduct.style.transform = "scale(1.2)";
                    setTimeout(() => {
                        finishedProduct.style.transform = "scale(1)";
                        setTimeout(() => {
                            finishedProduct.style.opacity = 0;
                        }, 800);
                    }, 300);
                }, 600);
            }, 500);
        }

        // é‡ç½®äº§å“
        function resetProducts() {
            [rawMaterial, processingProduct, finishedProduct].forEach(product => {
                product.style.opacity = 0;
                product.style.transform = "translate(0, 0)";
                product.style.left = "";
            });
            
            // é‡ç½®äº§å“å›¾æ ‡
            rawMaterial.innerHTML = "ğŸŒ¾";
            processingProduct.innerHTML = "ğŸŒ¾";
            finishedProduct.innerHTML = "ğŸ";
        }

        // æ˜¾ç¤ºç»“æœï¼ˆåˆ†æ•°æŒ‰100åˆ†åˆ¶è®¡ç®—ï¼‰
        function showResults() {
            clearInterval(gameState.timerInterval);
            const accuracy = gameState.totalAttempts > 0 ? Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100) : 0;
            const scorePercent = (gameState.score / 100) * 100; // æ€»åˆ†100åˆ†
            
            correctCount.textContent = `ç­”å¯¹: ${gameState.correctAnswers}é¢˜`;
            wrongCount.textContent = `ç­”é”™: ${gameState.wrongAttempts}é¢˜`;
            scoreText.textContent = `å¾—åˆ†: ${gameState.score}/100åˆ†`;
            timeText.textContent = `ç”¨æ—¶: ${sidebarTimer.textContent}`;
            accuracyResult.textContent = `å‡†ç¡®ç‡: ${accuracy}%`;
            scoreProgress.style.width = `${scorePercent}%`;
            
            resultModal.style.display = 'flex';
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            clearInterval(gameState.timerInterval);
            resetProducts();
            [helpModal, errorModal, correctModal, correctModalStage2, advanceModal, successModal, resultModal].forEach(modal => {
                modal.style.display = 'none';
            });
            document.querySelectorAll('.production-icon').forEach(icon => icon.classList.remove('active'));
            questionTitle.textContent = '';
            optionsContainer.innerHTML = '';
            submitBtn.disabled = true;
        }

        // çª—å£å¤§å°å˜åŒ–æ—¶è°ƒæ•´å¸ƒå±€
        window.addEventListener('resize', adjustGameContainerHeight);
    </script>
</body>
</html>
